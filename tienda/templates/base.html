{% load static %}
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>{% block title %}Papeler√≠a Ganbaru{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="{% static 'tienda/css/styles.css' %}" rel="stylesheet">
</head>
<body class="bg">
  <header class="site-header glass">
    <div class="wrap header-inner">
      <a class="brand" href="{% url 'tienda:inicio' %}">
        <img src="{% static 'tienda/img/ganbaru.jpg' %}" alt="Papeler√≠a Ganbaru" class="logo">
        <span class="brand-main">GANBARU</span>
        <span class="brand-sub">√∫tiles ‚Ä¢ oficina ‚Ä¢ escuela</span>
      </a>

      <nav class="main-nav">
        <a href="{% url 'tienda:carrito_ver' %}" class="btn btn-pill btn-secondary">Carrito</a>

        {% if user.is_authenticated %}
          <a href="{% url 'tienda:perfil' %}" class="btn btn-pill btn-outline">üë§ Mi perfil</a>

          {% if user.is_staff %}
            <!-- Bot√≥n visible solo para administradores -->
            <a class="btn btn-secondary btn-pill" href="{% url 'tienda:panel_home' %}">Panel</a>
            <a href="{% url 'admin:index' %}" class="btn btn-pill btn-ghost">Admin</a>
          {% endif %}

          <form action="{% url 'tienda:logout' %}" method="post" class="inline-form">
            {% csrf_token %}
            <button type="submit" class="btn btn-pill btn-danger">Salir</button>
          </form>
        {% else %}
          <a href="{% url 'tienda:login' %}" class="btn btn-pill btn-outline">Iniciar sesi√≥n</a>
          <a href="{% url 'tienda:registro' %}" class="btn btn-pill btn-primary">Registrarse</a>
        {% endif %}
      </nav>
    </div>
  </header>

  {% if messages %}
<div class="messages-container">
  {% for message in messages %}
    <div class="msg msg-{{ message.tags }}">
      <span class="msg-icon">
        {% if message.tags == "success" %}‚úîÔ∏è{% endif %}
        {% if message.tags == "error" %}‚ùå{% endif %}
        {% if message.tags == "warning" %}‚ö†Ô∏è{% endif %}
        {% if message.tags == "info" %}‚ÑπÔ∏è{% endif %}
      </span>

      <span class="msg-text">{{ message }}</span>

      <button class="msg-close" onclick="this.parentElement.remove()">‚úñ</button>
    </div>
  {% endfor %}
</div>
{% endif %}

<style>
/* Contenedor general */
.messages-container {
  margin: 1.5rem auto;
  max-width: 900px;
}

/* Caja base */
.msg {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem 1.3rem;
  border-radius: 14px;
  margin-bottom: 0.8rem;
  font-size: 0.95rem;
  font-weight: 600;
  animation: fadeIn 0.35s ease-out;
  box-shadow: 0 8px 18px rgba(0,0,0,0.1);
}

/* Icono */
.msg-icon {
  margin-right: 0.6rem;
  font-size: 1.2rem;
}

/* Texto */
.msg-text {
  flex: 1;
}

/* Bot√≥n cerrar */
.msg-close {
  border: none;
  background: transparent;
  font-size: 1.1rem;
  cursor: pointer;
  margin-left: 1rem;
  color: #6b3b4c;
}

/* Colores por tipo */
.msg-success {
  background: #eaffef;
  border: 2px solid #6bd38c;
  color: #2f7a47;
}

.msg-error {
  background: #ffe5e8;
  border: 2px solid #ff8a9a;
  color: #a7323f;
}

.msg-warning {
  background: #fff6d7;
  border: 2px solid #ffd66b;
  color: #967300;
}

.msg-info {
  background: #e2f0ff;
  border: 2px solid #7bb6ff;
  color: #2b5f9c;
}

/* Animaci√≥n */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-6px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>


  <main class="wrap">
    {% block content %}{% endblock %}
  </main>

  <footer class="site-footer glass">
    <div class="wrap footer-inner">
      <p>¬© {{ now|date:"Y" }} Papeler√≠a Ganbaru</p>
      <p class="fine">Santiago de Chile</p>
    </div>
  </footer>
</body>
</html>
